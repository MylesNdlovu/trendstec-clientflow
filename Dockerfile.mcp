# Dockerfile for MT5 Playwright MCP Server
# This runs separately from the main Vercel deployment
FROM mcr.microsoft.com/playwright:v1.48.0-jammy

WORKDIR /app

# Copy MCP server files
COPY mcp-servers/mt5-playwright/package*.json ./
COPY mcp-servers/mt5-playwright/tsconfig.json ./
COPY mcp-servers/mt5-playwright/src ./src

# Install ALL dependencies (including TypeScript for build)
RUN npm install

# Build TypeScript
RUN npm run build

# Remove dev dependencies after build
RUN npm prune --omit=dev

# Expose port for HTTP API
EXPOSE 3001

# Start the MCP server with HTTP wrapper
CMD ["node", "dist/index.js"]
